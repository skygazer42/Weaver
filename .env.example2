# ===== 模型与网关 =====
# OPENAI_API_KEY：OpenAI/DeepSeek 等兼容网关的 API 密钥
OPENAI_API_KEY=sk-70cec277bf8046a7aa9d1917b8217962
# OPENAI_BASE_URL：兼容网关基地址（DeepSeek 用 https://api.deepseek.com/v1）
OPENAI_BASE_URL=https://api.deepseek.com/v1
# PRIMARY_MODEL：主聊天/写作模型
PRIMARY_MODEL=deepseek-chat
# REASONING_MODEL：规划/推理模型，不可用时自动回退 PRIMARY_MODEL
REASONING_MODEL=deepseek-chat
# USE_AZURE：是否使用 Azure OpenAI
USE_AZURE=false
# AZURE_API_KEY：Azure OpenAI 密钥
AZURE_API_KEY=
# AZURE_ENDPOINT：Azure 终端地址
AZURE_ENDPOINT=
# AZURE_API_VERSION：Azure OpenAI API 版本
AZURE_API_VERSION=2025-03-01-preview
# OPENAI_TIMEOUT：LLM 请求超时（秒）
OPENAI_TIMEOUT=60
# OPENAI_EXTRA_BODY：额外请求体（JSON 字符串）
OPENAI_EXTRA_BODY={}
# ANTHROPIC_API_KEY：Anthropic 密钥（可选）
ANTHROPIC_API_KEY=
# PROMPT_STYLE：提示词风格 simple|enhanced|custom
PROMPT_STYLE=enhanced
# CUSTOM_AGENT_PROMPT_PATH：自定义 Agent 提示路径
CUSTOM_AGENT_PROMPT_PATH=
# CUSTOM_WRITER_PROMPT_PATH：自定义 Writer 提示路径
CUSTOM_WRITER_PROMPT_PATH=
# AGENT_XML_TOOL_CALLING：是否启用 XML 工具调用
AGENT_XML_TOOL_CALLING=false
# AGENT_NATIVE_TOOL_CALLING：是否启用原生工具调用
AGENT_NATIVE_TOOL_CALLING=true
# AGENT_EXECUTE_TOOLS：是否自动执行工具
AGENT_EXECUTE_TOOLS=true
# AGENT_AUTO_CONTINUE：工具调用后是否自动续写
AGENT_AUTO_CONTINUE=false
# AGENT_MAX_AUTO_CONTINUES：自动续写最大轮数
AGENT_MAX_AUTO_CONTINUES=25
# AGENT_TOOL_EXECUTION_STRATEGY：工具执行策略 sequential|parallel
AGENT_TOOL_EXECUTION_STRATEGY=sequential

# ===== 工具 / 第三方 =====
# TAVILY_API_KEY：Tavily 搜索密钥
TAVILY_API_KEY=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
# SEARCH_ENGINES：API 搜索引擎优先级（逗号分隔），无 key 的引擎会自动跳过
# 可选：tavily,serper,serpapi,bing,google_cse,exa,firecrawl
# 示例：SEARCH_ENGINES=serper,tavily
SEARCH_ENGINES=tavily
# SERPER_API_KEY：Serper（Google）API key（可选）
SERPER_API_KEY=
# SERPAPI_API_KEY：SerpAPI key（可选）
SERPAPI_API_KEY=
# BING_API_KEY：Bing Search API key（可选）
BING_API_KEY=
# EXA_API_KEY：Exa API key（可选）
EXA_API_KEY=
# FIRECRAWL_API_KEY：Firecrawl API key（可选）
FIRECRAWL_API_KEY=
# GOOGLE_SEARCH_API_KEY / GOOGLE_SEARCH_ENGINE_ID：Google Custom Search（可选）
GOOGLE_SEARCH_API_KEY=
GOOGLE_SEARCH_ENGINE_ID=
# E2B_API_KEY：E2B 代码执行密钥
E2B_API_KEY=e2b_5281caa2f1797f04e989b6387e6219839c2f2931
# DASHSCOPE_API_KEY：阿里 DashScope（ASR/TTS）密钥
DASHSCOPE_API_KEY=sk-24fe43e7669f476b9fdd07a65faa2ff7

# ===== 记忆 / 长期存储 =====
# MEM0_API_KEY：Mem0 密钥（可选）
MEM0_API_KEY=m0-5FMn9RGTXJ6bOYKzih8KoMJxVrbxwGwvFWCKwXnF
# ENABLE_MEMORY：是否启用长记忆
ENABLE_MEMORY=false
# MEMORY_NAMESPACE：记忆命名空间
MEMORY_NAMESPACE=default
# MEMORY_USER_ID：记忆用户 ID
MEMORY_USER_ID=default_user
# MEMORY_MAX_ENTRIES：每用户最大记忆条数
MEMORY_MAX_ENTRIES=20
# MEMORY_TOP_K：召回条数
MEMORY_TOP_K=5
# MEMORY_STORE_BACKEND：长记忆存储后端 memory|postgres|redis
MEMORY_STORE_BACKEND=memory
# MEMORY_STORE_URL：使用 postgres/redis 时的连接串
MEMORY_STORE_URL=postgres

# ===== 数据库 =====
# DATABASE_URL：Postgres 连接串（留空则使用内存 checkpointer）
DATABASE_URL=

# ===== 运行 / 可观测性 =====
# APP_ENV：运行环境 dev|test|prod
APP_ENV=dev
# ENABLE_PROMETHEUS：是否暴露 Prometheus /metrics
ENABLE_PROMETHEUS=false

# ===== 应用基础 =====
# DEBUG：调试模式
DEBUG=True
# CORS_ORIGINS：允许的前端源（逗号分隔）
# 注意：部分 Windows 环境会把 2996-3095 端口段保留（导致 3000/3001 启动时报 EACCES），前端默认使用 3100
CORS_ORIGINS=http://localhost:3000,http://localhost:3100
# INTERRUPT_BEFORE_NODES：需要中断的节点列表
INTERRUPT_BEFORE_NODES=

# ===== 日志 =====
# LOG_LEVEL：日志级别
LOG_LEVEL=INFO
# LOG_FILE：日志文件路径
LOG_FILE=logs/weaver.log
# LOG_MAX_BYTES：单个日志文件最大字节
LOG_MAX_BYTES=10485760
# LOG_BACKUP_COUNT：日志轮转备份数
LOG_BACKUP_COUNT=5
# LOG_FORMAT：日志格式
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(message)s
# ENABLE_FILE_LOGGING：是否写入文件
ENABLE_FILE_LOGGING=true
# ENABLE_JSON_LOGGING：是否使用 JSON 日志
ENABLE_JSON_LOGGING=false

# ===== LangGraph 行为 =====
# HUMAN_REVIEW：是否需要人工复核
HUMAN_REVIEW=false
# TOOL_APPROVAL：工具执行前是否需审批
TOOL_APPROVAL=false
# MAX_REVISIONS：报告最大修订次数
MAX_REVISIONS=2
# MAX_CONCURRENCY：最大并发
MAX_CONCURRENCY=5
# SEARCH_BATCH_SIZE：搜索批次大小
SEARCH_BATCH_SIZE=3
# API_RATE_LIMIT：API 调用间隔（秒）
API_RATE_LIMIT=0.5
# TOOL_RETRY：是否启用工具重试
TOOL_RETRY=false
# TOOL_RETRY_MAX_ATTEMPTS：工具重试次数
TOOL_RETRY_MAX_ATTEMPTS=3
# TOOL_RETRY_BACKOFF：重试指数回退系数
TOOL_RETRY_BACKOFF=1.5
# TOOL_CALL_LIMIT：单请求工具调用上限（0=不限）
TOOL_CALL_LIMIT=0
# STRIP_TOOL_MESSAGES：是否丢弃 ToolMessage 节省 Token
STRIP_TOOL_MESSAGES=false
# TOOL_SELECTOR：是否启用工具选择器
TOOL_SELECTOR=false
# TOOL_SELECTOR_MODEL：工具选择器模型
TOOL_SELECTOR_MODEL=deepseek-chat
# TOOL_SELECTOR_MAX_TOOLS：工具选择器返回数量
TOOL_SELECTOR_MAX_TOOLS=3
# TOOL_SELECTOR_ALWAYS_INCLUDE：工具选择器固定包含的工具（逗号分隔）
TOOL_SELECTOR_ALWAYS_INCLUDE=
# TOOL_SELECTOR_PROMPT：工具选择器自定义提示
TOOL_SELECTOR_PROMPT=
# ENABLE_TODO_MIDDLEWARE：是否启用 TODO 中间件
ENABLE_TODO_MIDDLEWARE=false
# TODO_SYSTEM_PROMPT：TODO 中间件系统提示
TODO_SYSTEM_PROMPT=
# TODO_TOOL_DESCRIPTION：TODO 工具描述
TODO_TOOL_DESCRIPTION=

# ===== 短期记忆（截断与摘要）=====
# TRIM_MESSAGES：是否启用消息截断
TRIM_MESSAGES=false
# TRIM_MESSAGES_KEEP_FIRST：截断保留最前消息数
TRIM_MESSAGES_KEEP_FIRST=2
# TRIM_MESSAGES_KEEP_LAST：截断保留最新消息数
TRIM_MESSAGES_KEEP_LAST=8
# SUMMARY_MESSAGES：是否启用中段摘要
SUMMARY_MESSAGES=false
# SUMMARY_MESSAGES_TRIGGER：触发摘要的消息条数
SUMMARY_MESSAGES_TRIGGER=12
# SUMMARY_MESSAGES_KEEP_LAST：摘要后保留的末尾消息数
SUMMARY_MESSAGES_KEEP_LAST=4
# SUMMARY_MESSAGES_MODEL：摘要所用模型
SUMMARY_MESSAGES_MODEL=gpt-4o-mini
# SUMMARY_MESSAGES_WORD_LIMIT：摘要字数上限
SUMMARY_MESSAGES_WORD_LIMIT=200
# CONTEXT_EDIT_TRIGGER_TOKENS：上下文压缩触发 Token 数
CONTEXT_EDIT_TRIGGER_TOKENS=1000
# CONTEXT_EDIT_KEEP_TOOLS：压缩时保留最近工具调用数
CONTEXT_EDIT_KEEP_TOOLS=3

# ===== Deepsearch =====
# DEEPSEARCH_MAX_EPOCHS：深搜最大轮数
DEEPSEARCH_MAX_EPOCHS=2
# DEEPSEARCH_QUERY_NUM：每轮生成子查询数量
DEEPSEARCH_QUERY_NUM=5
# DEEPSEARCH_RESULTS_PER_QUERY：每个查询保留结果数
DEEPSEARCH_RESULTS_PER_QUERY=3
# DEEPSEARCH_ENABLE_CRAWLER：是否启用轻量爬虫
DEEPSEARCH_ENABLE_CRAWLER=false
# DEEPSEARCH_SAVE_DATA：是否保存深搜数据
DEEPSEARCH_SAVE_DATA=false
# DEEPSEARCH_SAVE_DIR：深搜数据保存目录
DEEPSEARCH_SAVE_DIR=eval/deepsearch_data

# ===== MCP（多模型工具桥）=====
# ENABLE_MCP：是否启用 MCP
ENABLE_MCP=false
# MCP_SERVERS：MCP 服务器配置 JSON
MCP_SERVERS={}

# 是否启用无头爬虫（true=无窗口，false=可视化调试）
CRAWLER_HEADLESS=false

# 是否启用Playwright优化爬虫（Windows上易出错，默认false）
USE_OPTIMIZED_CRAWLER=true

# E2B 浏览器沙箱模板 ID（官方提供 browser 模板，若有自定义请改成对应名称）
SANDBOX_TEMPLATE_BROWSER=browser

# 是否允许沙箱访问互联网（true/false）
SANDBOX_ALLOW_INTERNET=true
